<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechSpace - Quiz Cybers√©curit√© | Testez vos Connaissances</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        * { font-family: 'Inter', sans-serif; }

        .gradient-bg {
            background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 20%, #1d4ed8 40%, #2563eb 60%, #3b82f6 80%, #60a5fa 100%);
            animation: gradientShift 15s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 0.8s ease forwards;
        }

        .fade-in-delay-1 { animation-delay: 0.2s; }
        .fade-in-delay-2 { animation-delay: 0.4s; }
        .fade-in-delay-3 { animation-delay: 0.6s; }
        .fade-in-delay-4 { animation-delay: 0.8s; }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .quiz-card {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            border: 1px solid #475569;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .quiz-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .quiz-card:hover::before {
            left: 100%;
        }

        .quiz-card:hover {
            border-color: #3b82f6;
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(59, 130, 246, 0.2);
        }

        .answer-option {
            background: linear-gradient(135deg, #374151 0%, #4b5563 100%);
            border: 2px solid #6b7280;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .answer-option:hover {
            border-color: #3b82f6;
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            transform: translateX(5px);
        }

        .answer-option.correct {
            border-color: #10b981;
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
            animation: correctPulse 0.6s ease;
        }

        .answer-option.incorrect {
            border-color: #ef4444;
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            animation: incorrectShake 0.6s ease;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes incorrectShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .progress-bar {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899);
            transition: width 0.5s ease;
        }

        .timer-circle {
            stroke-dasharray: 283;
            stroke-dashoffset: 283;
            transition: stroke-dashoffset 1s linear;
        }

        .timer-warning {
            stroke: #f59e0b;
            animation: timerPulse 1s infinite;
        }

        .timer-danger {
            stroke: #ef4444;
            animation: timerPulse 0.5s infinite;
        }

        @keyframes timerPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .score-animation {
            animation: scoreUp 0.8s ease;
        }

        @keyframes scoreUp {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); color: #10b981; }
            100% { transform: scale(1); }
        }

        .level-badge {
            background: linear-gradient(45deg, #f59e0b, #d97706);
            animation: badgeGlow 2s ease infinite;
        }

        @keyframes badgeGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(245, 158, 11, 0.3); }
            50% { box-shadow: 0 0 30px rgba(245, 158, 11, 0.6); }
        }

        .celebration {
            animation: celebrate 1s ease;
        }

        @keyframes celebrate {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.1) rotate(-5deg); }
            75% { transform: scale(1.1) rotate(5deg); }
        }

        .result-card {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            border: 2px solid #3b82f6;
            animation: resultSlideIn 0.8s ease;
        }

        @keyframes resultSlideIn {
            0% { opacity: 0; transform: translateY(50px) scale(0.9); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }
    </style>
</head>
<body class="gradient-bg text-white min-h-screen">
<!-- Navigation -->
<nav class="fixed w-full z-50 bg-slate-900/95 backdrop-blur-lg border-b border-slate-700">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
            <div class="flex items-center space-x-3">
                <div class="rounded-lg p-2">
                    <svg width="40" height="40" viewBox="0 0 40 40" class="text-blue-400">
                        <circle cx="20" cy="20" r="18" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.3"/>
                        <circle cx="20" cy="20" r="14" fill="none" stroke="currentColor" stroke-width="2"/>
                        <path d="M20 6 L14 10 L14 20 Q14 24 20 26 Q26 24 26 20 L26 10 Z" fill="url(#logoGradient)" stroke="currentColor" stroke-width="1.5"/>
                        <circle cx="20" cy="16" r="2" fill="currentColor"/>
                        <defs>
                            <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:0.8" />
                                <stop offset="100%" style="stop-color:#1e40af;stop-opacity:0.9" />
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
                <div>
                    <span class="text-2xl font-bold text-blue-400">TechSpace</span>
                    <div class="text-xs text-orange-400 font-bold">QUIZ CYBER</div>
                </div>
            </div>

            <div class="flex items-center space-x-6">
                <a href="../index.html" class="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105">üè† Accueil</a>
                <div class="flex items-center space-x-2 bg-purple-600/20 px-3 py-1 rounded-full">
                    <span class="text-purple-400 text-sm font-bold">üß† QUIZ INTERACTIF</span>
                </div>
            </div>
        </div>
    </div>
</nav>

<!-- Page d'accueil du quiz -->
<section id="quizHome" class="pt-32 pb-12 min-h-screen flex items-center">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <div class="fade-in">
            <h1 class="text-7xl font-extrabold mb-8">
                <span class="text-6xl">üß†</span><br>
                <span class="bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">
                        Quiz Cybers√©curit√©
                    </span>
            </h1>
            <p class="text-2xl text-gray-300 mb-12 leading-relaxed">
                Testez vos connaissances en s√©curit√© informatique !<br>
                <span class="text-blue-400 font-bold">20 questions ‚Ä¢ Difficult√© progressive ‚Ä¢ Scoring intelligent</span>
            </p>
        </div>

        <div class="grid md:grid-cols-3 gap-8 mb-12 fade-in fade-in-delay-1">
            <div class="quiz-card p-8 rounded-2xl text-center">
                <div class="text-4xl mb-4">‚ö°</div>
                <h3 class="text-xl font-bold mb-3 text-blue-400">Questions Vari√©es</h3>
                <p class="text-gray-300">Malwares, cryptographie, phishing, IA et plus encore !</p>
            </div>

            <div class="quiz-card p-8 rounded-2xl text-center">
                <div class="text-4xl mb-4">‚è±Ô∏è</div>
                <h3 class="text-xl font-bold mb-3 text-purple-400">Timer Dynamique</h3>
                <p class="text-gray-300">30 secondes par question avec bonus de rapidit√© !</p>
            </div>

            <div class="quiz-card p-8 rounded-2xl text-center">
                <div class="text-4xl mb-4">üèÜ</div>
                <h3 class="text-xl font-bold mb-3 text-green-400">Niveaux d'Expertise</h3>
                <p class="text-gray-300">De d√©butant √† ma√Ætre cyber selon vos r√©sultats !</p>
            </div>
        </div>

        <div class="fade-in fade-in-delay-2">
            <button onclick="startQuiz()" class="bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 px-12 py-4 rounded-2xl text-xl font-bold transition-all transform hover:scale-105 shadow-2xl">
                üöÄ Commencer le Quiz
            </button>
            <p class="text-gray-400 mt-4">Pr√™t √† d√©fier vos connaissances cyber ?</p>
        </div>
    </div>
</section>

<!-- Interface du quiz -->
<section id="quizInterface" class="pt-24 pb-12 min-h-screen hidden">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Header du quiz -->
        <div class="flex justify-between items-center mb-8">
            <div class="flex items-center space-x-6">
                <div class="text-2xl font-bold">
                    Question <span id="currentQuestion" class="text-blue-400">1</span>/<span id="totalQuestions" class="text-purple-400">20</span>
                </div>
                <div class="level-badge px-4 py-2 rounded-full text-white font-bold">
                    Score: <span id="currentScore" class="text-yellow-200">0</span>
                </div>
            </div>

            <!-- Timer circulaire -->
            <div class="relative w-20 h-20">
                <svg class="w-20 h-20 transform -rotate-90" viewBox="0 0 100 100">
                    <circle cx="50" cy="50" r="45" fill="none" stroke="#374151" stroke-width="8"/>
                    <circle id="timerCircle" cx="50" cy="50" r="45" fill="none" stroke="#3b82f6" stroke-width="8"
                            class="timer-circle" stroke-linecap="round"/>
                </svg>
                <div class="absolute inset-0 flex items-center justify-center">
                    <span id="timeLeft" class="text-xl font-bold">30</span>
                </div>
            </div>
        </div>

        <!-- Barre de progression -->
        <div class="w-full bg-gray-700 rounded-full h-3 mb-8">
            <div id="progressBar" class="progress-bar h-3 rounded-full" style="width: 5%"></div>
        </div>

        <!-- Question -->
        <div class="quiz-card p-8 rounded-2xl mb-8">
            <div class="flex items-start space-x-4 mb-6">
                <div id="questionIcon" class="text-3xl">ü§î</div>
                <div class="flex-1">
                    <div id="questionCategory" class="text-blue-400 font-bold mb-2">Cat√©gorie</div>
                    <h2 id="questionText" class="text-2xl font-bold leading-relaxed">Question appara√Ætra ici...</h2>
                </div>
            </div>
        </div>

        <!-- Options de r√©ponse -->
        <div id="answersContainer" class="space-y-4 mb-8">
            <!-- Les r√©ponses seront g√©n√©r√©es ici -->
        </div>

        <!-- Feedback -->
        <div id="feedback" class="hidden quiz-card p-6 rounded-2xl mb-6">
            <div class="flex items-start space-x-4">
                <div id="feedbackIcon" class="text-3xl"></div>
                <div>
                    <div id="feedbackTitle" class="text-xl font-bold mb-2"></div>
                    <div id="feedbackText" class="text-gray-300"></div>
                </div>
            </div>
        </div>

        <!-- Bouton suivant -->
        <div class="text-center">
            <button id="nextButton" onclick="nextQuestion()" class="hidden bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 px-8 py-3 rounded-xl font-bold transition-all">
                Question Suivante ‚Üí
            </button>
        </div>
    </div>
</section>

<!-- R√©sultats -->
<section id="quizResults" class="pt-24 pb-12 min-h-screen hidden">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <div class="result-card p-12 rounded-3xl">
            <div id="resultIcon" class="text-8xl mb-6">üéâ</div>
            <h1 class="text-5xl font-extrabold mb-4">
                    <span class="bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent">
                        Quiz Termin√© !
                    </span>
            </h1>

            <div class="grid md:grid-cols-3 gap-8 mb-8">
                <div class="quiz-card p-6 rounded-xl">
                    <div class="text-3xl font-bold text-blue-400" id="finalScore">0</div>
                    <div class="text-gray-300">Score Final</div>
                </div>
                <div class="quiz-card p-6 rounded-xl">
                    <div class="text-3xl font-bold text-green-400" id="correctAnswers">0/20</div>
                    <div class="text-gray-300">Bonnes R√©ponses</div>
                </div>
                <div class="quiz-card p-6 rounded-xl">
                    <div class="text-3xl font-bold text-purple-400" id="totalTime">0:00</div>
                    <div class="text-gray-300">Temps Total</div>
                </div>
            </div>

            <div class="level-badge px-8 py-4 rounded-2xl mb-8 inline-block">
                <div class="text-2xl font-bold" id="userLevel">Niveau</div>
                <div class="text-sm" id="levelDescription">Description</div>
            </div>

            <div id="recommendations" class="quiz-card p-6 rounded-xl mb-8 text-left">
                <h3 class="text-xl font-bold mb-4 text-center">üìö Recommandations Personnalis√©es</h3>
                <div id="recommendationsList"></div>
            </div>

            <div class="flex justify-center space-x-4">
                <button onclick="restartQuiz()" class="bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 px-8 py-3 rounded-xl font-bold transition-all">
                    üîÑ Recommencer
                </button>
                <button onclick="shareResults()" class="bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 px-8 py-3 rounded-xl font-bold transition-all">
                    üì§ Partager
                </button>
            </div>
        </div>
    </div>
</section>

<script>
    // Configuration du quiz
    const quizData = [
        {
            category: "ü¶† Malwares",
            question: "Quel type de malware se propage automatiquement d'un ordinateur √† l'autre sans intervention humaine ?",
            options: ["Virus", "Ver (Worm)", "Cheval de Troie", "Spyware"],
            correct: 1,
            explanation: "Un ver (worm) est capable de se r√©pliquer et de se propager automatiquement √† travers les r√©seaux, contrairement aux virus qui n√©cessitent une action de l'utilisateur."
        },
        {
            category: "üîê Cryptographie",
            question: "Quelle est la principale diff√©rence entre le chiffrement sym√©trique et asym√©trique ?",
            options: ["La vitesse de chiffrement", "Le nombre de cl√©s utilis√©es", "La taille des donn√©es", "Le niveau de s√©curit√©"],
            correct: 1,
            explanation: "Le chiffrement sym√©trique utilise une seule cl√© pour chiffrer et d√©chiffrer, tandis que l'asym√©trique utilise une paire de cl√©s (publique/priv√©e)."
        },
        {
            category: "üé£ Phishing",
            question: "Qu'est-ce qui caract√©rise une attaque de 'spear phishing' ?",
            options: ["Elle cible de nombreuses personnes", "Elle est personnalis√©e pour une cible sp√©cifique", "Elle utilise des SMS", "Elle exploite des vuln√©rabilit√©s"],
            correct: 1,
            explanation: "Le spear phishing est une attaque cibl√©e et personnalis√©e visant une personne ou organisation sp√©cifique, contrairement au phishing de masse."
        },
        {
            category: "üî• Pare-feu",
            question: "Quel type de pare-feu analyse le contenu des paquets et maintient l'√©tat des connexions ?",
            options: ["Pare-feu de filtrage de paquets", "Pare-feu stateful", "Pare-feu proxy", "Pare-feu NAT"],
            correct: 1,
            explanation: "Un pare-feu stateful (√† √©tat) suit l'√©tat des connexions r√©seau et peut prendre des d√©cisions bas√©es sur le contexte de la connexion."
        },
        {
            category: "üïµÔ∏è Ing√©nierie Sociale",
            question: "Quelle technique d'ing√©nierie sociale consiste √† fouiller les poubelles pour trouver des informations sensibles ?",
            options: ["Pretexting", "Baiting", "Dumpster diving", "Tailgating"],
            correct: 2,
            explanation: "Le 'dumpster diving' consiste √† fouiller les d√©chets pour r√©cup√©rer des documents ou supports contenant des informations confidentielles."
        },
        {
            category: "üåê S√©curit√© Web",
            question: "Que signifie l'acronyme XSS en s√©curit√© web ?",
            options: ["XML Security Standard", "Cross-Site Scripting", "eXternal Security System", "eXtended SSL Support"],
            correct: 1,
            explanation: "XSS (Cross-Site Scripting) est une vuln√©rabilit√© permettant d'injecter du code malveillant dans des pages web vues par d'autres utilisateurs."
        },
        {
            category: "üîë Authentification",
            question: "Qu'est-ce que l'authentification √† deux facteurs (2FA) ?",
            options: ["Deux mots de passe diff√©rents", "Un mot de passe + un √©l√©ment suppl√©mentaire", "Deux questions de s√©curit√©", "Deux tentatives de connexion"],
            correct: 1,
            explanation: "La 2FA combine quelque chose que vous connaissez (mot de passe) avec quelque chose que vous poss√©dez (t√©l√©phone, token) ou que vous √™tes (biom√©trie)."
        },
        {
            category: "üí∞ Ransomware",
            question: "Quelle est la meilleure d√©fense contre les ransomwares ?",
            options: ["Antivirus puissant", "Sauvegardes r√©guli√®res", "Pare-feu avanc√©", "Mots de passe complexes"],
            correct: 1,
            explanation: "Les sauvegardes r√©guli√®res et test√©es permettent de restaurer les donn√©es sans payer la ran√ßon en cas d'infection par ransomware."
        },
        {
            category: "üîç Analyse Forensique",
            question: "Qu'est-ce qu'un 'hash' en informatique l√©gale ?",
            options: ["Un mot de passe chiffr√©", "Une empreinte num√©rique unique", "Un fichier corrompu", "Une signature √©lectronique"],
            correct: 1,
            explanation: "Un hash est une empreinte num√©rique unique qui permet de v√©rifier l'int√©grit√© d'un fichier et de d√©tecter toute modification."
        },
        {
            category: "‚òÅÔ∏è S√©curit√© Cloud",
            question: "Quel mod√®le de responsabilit√© s'applique g√©n√©ralement au cloud computing ?",
            options: ["Responsabilit√© totale du fournisseur", "Responsabilit√© totale du client", "Responsabilit√© partag√©e", "Aucune responsabilit√©"],
            correct: 2,
            explanation: "Le mod√®le de responsabilit√© partag√©e d√©finit ce dont le fournisseur cloud et le client sont respectivement responsables en mati√®re de s√©curit√©."
        },
        {
            category: "ü§ñ IA et S√©curit√©",
            question: "Comment l'IA peut-elle √™tre utilis√©e malicieusement en cybers√©curit√© ?",
            options: ["G√©n√©ration de deepfakes", "Automatisation d'attaques", "√âvasion d'antivirus", "Toutes les r√©ponses"],
            correct: 3,
            explanation: "L'IA peut √™tre d√©tourn√©e pour cr√©er des deepfakes, automatiser des cyberattaques, g√©n√©rer du code malveillant et contourner les d√©fenses."
        },
        {
            category: "üì± S√©curit√© Mobile",
            question: "Qu'est-ce qu'un 'jailbreak' ou 'root' sur un appareil mobile ?",
            options: ["Une mise √† jour syst√®me", "Suppression des restrictions du fabricant", "Installation d'antivirus", "Sauvegarde des donn√©es"],
            correct: 1,
            explanation: "Le jailbreak/root supprime les restrictions de s√©curit√© impos√©es par le fabricant, donnant un acc√®s administrateur complet mais r√©duisant la s√©curit√©."
        },
        {
            category: "üè¢ S√©curit√© Entreprise",
            question: "Que signifie le principe du 'moindre privil√®ge' ?",
            options: ["Donner tous les droits aux utilisateurs", "Accorder uniquement les permissions n√©cessaires", "Supprimer tous les privil√®ges", "Changer r√©guli√®rement les droits"],
            correct: 1,
            explanation: "Le principe du moindre privil√®ge consiste √† n'accorder aux utilisateurs que les permissions strictement n√©cessaires √† leur travail."
        },
        {
            category: "üåç R√©glementation",
            question: "Que r√©gule principalement le RGPD (GDPR) ?",
            options: ["La s√©curit√© des r√©seaux", "La protection des donn√©es personnelles", "Les cyberattaques", "Les logiciels malveillants"],
            correct: 1,
            explanation: "Le RGPD (R√®glement G√©n√©ral sur la Protection des Donn√©es) r√©gule la collecte, le traitement et la protection des donn√©es personnelles en Europe."
        },
        {
            category: "üîß Outils de S√©curit√©",
            question: "√Ä quoi sert un SIEM (Security Information and Event Management) ?",
            options: ["Chiffrer les donn√©es", "Analyser les logs de s√©curit√©", "Bloquer les malwares", "G√©rer les mots de passe"],
            correct: 1,
            explanation: "Un SIEM collecte, analyse et corr√®le les logs de s√©curit√© de diff√©rentes sources pour d√©tecter les incidents et menaces."
        },
        {
            category: "üéØ Tests de P√©n√©tration",
            question: "Qu'est-ce qu'un 'pentest' ?",
            options: ["Un test de performance", "Un test d'intrusion autoris√©", "Un test de r√©sistance", "Un test utilisateur"],
            correct: 1,
            explanation: "Un pentest (test de p√©n√©tration) est une √©valuation de s√©curit√© autoris√©e qui simule des attaques pour identifier les vuln√©rabilit√©s."
        },
        {
            category: "üîê Gestion des Acc√®s",
            question: "Qu'est-ce que l'architecture 'Zero Trust' ?",
            options: ["Ne faire confiance √† personne par d√©faut", "Faire confiance aux employ√©s uniquement", "Bloquer tout le trafic", "Chiffrer toutes les donn√©es"],
            correct: 0,
            explanation: "Zero Trust est un mod√®le de s√©curit√© qui ne fait confiance √† aucun utilisateur ou appareil par d√©faut, m√™me √† l'int√©rieur du r√©seau."
        },
        {
            category: "‚ö° Incidents de S√©curit√©",
            question: "Quelle est la premi√®re √©tape lors de la d√©couverte d'un incident de s√©curit√© ?",
            options: ["√âteindre tous les syst√®mes", "Contenir la menace", "Analyser les logs", "Informer la direction"],
            correct: 1,
            explanation: "La premi√®re priorit√© est de contenir l'incident pour emp√™cher sa propagation, avant de proc√©der √† l'analyse et √† la r√©cup√©ration."
        },
        {
            category: "üîç Threat Intelligence",
            question: "Qu'est-ce qu'un IOC (Indicator of Compromise) ?",
            options: ["Un certificat de s√©curit√©", "Un indice de compromission", "Un outil de chiffrement", "Un protocole r√©seau"],
            correct: 1,
            explanation: "Un IOC est un artefact ou observable qui indique qu'un syst√®me a potentiellement √©t√© compromis (hash de malware, IP malveillante, etc.)."
        },
        {
            category: "üõ°Ô∏è D√©fense Avanc√©e",
            question: "Qu'est-ce que l'EDR (Endpoint Detection and Response) ?",
            options: ["Un type de pare-feu", "Une solution de d√©tection sur les postes", "Un protocole de chiffrement", "Un syst√®me de sauvegarde"],
            correct: 1,
            explanation: "L'EDR surveille et analyse en continu les activit√©s des endpoints pour d√©tecter et r√©pondre aux menaces avanc√©es."
        }
    ];

    // Variables globales
    let currentQuestionIndex = 0;
    let score = 0;
    let correctAnswers = 0;
    let timeLeft = 30;
    let timer;
    let startTime;
    let userAnswers = [];
    let shuffledQuestions = [];

    // Initialisation
    document.addEventListener('DOMContentLoaded', function() {
        // M√©langer les questions
        shuffledQuestions = shuffleArray([...quizData]);
    });

    // Fonction pour m√©langer un array
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // D√©marrer le quiz
    function startQuiz() {
        document.getElementById('quizHome').classList.add('hidden');
        document.getElementById('quizInterface').classList.remove('hidden');

        currentQuestionIndex = 0;
        score = 0;
        correctAnswers = 0;
        userAnswers = [];
        startTime = new Date();

        // M√©langer √† nouveau les questions
        shuffledQuestions = shuffleArray([...quizData]);

        loadQuestion();
    }

    // Charger une question
    function loadQuestion() {
        if (currentQuestionIndex >= shuffledQuestions.length) {
            endQuiz();
            return;
        }

        const question = shuffledQuestions[currentQuestionIndex];

        // Mettre √† jour l'interface
        document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
        document.getElementById('totalQuestions').textContent = shuffledQuestions.length;
        document.getElementById('questionCategory').textContent = question.category;
        document.getElementById('questionText').textContent = question.question;

        // Ic√¥ne de cat√©gorie
        const categoryIcons = {
            'ü¶† Malwares': 'ü¶†',
            'üîê Cryptographie': 'üîê',
            'üé£ Phishing': 'üé£',
            'üî• Pare-feu': 'üî•',
            'üïµÔ∏è Ing√©nierie Sociale': 'üïµÔ∏è',
            'üåê S√©curit√© Web': 'üåê',
            'üîë Authentification': 'üîë',
            'üí∞ Ransomware': 'üí∞',
            'üîç Analyse Forensique': 'üîç',
            '‚òÅÔ∏è S√©curit√© Cloud': '‚òÅÔ∏è',
            'ü§ñ IA et S√©curit√©': 'ü§ñ',
            'üì± S√©curit√© Mobile': 'üì±',
            'üè¢ S√©curit√© Entreprise': 'üè¢',
            'üåç R√©glementation': 'üåç',
            'üîß Outils de S√©curit√©': 'üîß',
            'üéØ Tests de P√©n√©tration': 'üéØ',
            'üîê Gestion des Acc√®s': 'üîê',
            '‚ö° Incidents de S√©curit√©': '‚ö°',
            'üîç Threat Intelligence': 'üîç',
            'üõ°Ô∏è D√©fense Avanc√©e': 'üõ°Ô∏è'
        };

        document.getElementById('questionIcon').textContent = categoryIcons[question.category] || 'ü§î';

        // M√©langer les options
        const shuffledOptions = question.options.map((option, index) => ({
            text: option,
            originalIndex: index
        }));
        shuffleArray(shuffledOptions);

        // G√©n√©rer les options de r√©ponse
        const container = document.getElementById('answersContainer');
        container.innerHTML = shuffledOptions.map((option, index) => `
                <div class="answer-option p-4 rounded-xl" onclick="selectAnswer(${option.originalIndex}, this)">
                    <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center font-bold">
                            ${String.fromCharCode(65 + index)}
                        </div>
                        <span class="text-lg">${option.text}</span>
                    </div>
                </div>
            `).join('');

        // Masquer le feedback et le bouton suivant
        document.getElementById('feedback').classList.add('hidden');
        document.getElementById('nextButton').classList.add('hidden');

        // Mettre √† jour la barre de progression
        const progress = ((currentQuestionIndex + 1) / shuffledQuestions.length) * 100;
        document.getElementById('progressBar').style.width = progress + '%';

        // D√©marrer le timer
        startTimer();
    }

    // D√©marrer le timer
    function startTimer() {
        timeLeft = 30;
        document.getElementById('timeLeft').textContent = timeLeft;

        const circle = document.getElementById('timerCircle');
        circle.classList.remove('timer-warning', 'timer-danger');

        timer = setInterval(() => {
            timeLeft--;
            document.getElementById('timeLeft').textContent = timeLeft;

            // Mettre √† jour le cercle
            const offset = 283 - (283 * (30 - timeLeft) / 30);
            circle.style.strokeDashoffset = offset;

            // Changer la couleur selon le temps restant
            if (timeLeft <= 10 && timeLeft > 5) {
                circle.classList.add('timer-warning');
            } else if (timeLeft <= 5) {
                circle.classList.add('timer-danger');
            }

            if (timeLeft <= 0) {
                clearInterval(timer);
                selectAnswer(-1, null); // Temps √©coul√©
            }
        }, 1000);
    }

    // S√©lectionner une r√©ponse
    function selectAnswer(answerIndex, element) {
        clearInterval(timer);

        const question = shuffledQuestions[currentQuestionIndex];
        const isCorrect = answerIndex === question.correct;
        const timeBonus = Math.max(0, timeLeft * 2); // Bonus de rapidit√©

        // D√©sactiver toutes les options
        document.querySelectorAll('.answer-option').forEach(option => {
            option.style.pointerEvents = 'none';
        });

        // Marquer la bonne et mauvaise r√©ponse
        document.querySelectorAll('.answer-option').forEach((option, index) => {
            const optionText = option.querySelector('span').textContent;
            if (optionText === question.options[question.correct]) {
                option.classList.add('correct');
            } else if (element && option === element && !isCorrect) {
                option.classList.add('incorrect');
            }
        });

        // Calculer le score
        let questionScore = 0;
        if (isCorrect) {
            questionScore = 100 + timeBonus;
            correctAnswers++;

            // Animation de score
            const scoreElement = document.getElementById('currentScore');
            scoreElement.classList.add('score-animation');
            setTimeout(() => scoreElement.classList.remove('score-animation'), 800);
        }

        score += questionScore;
        document.getElementById('currentScore').textContent = score;

        // Enregistrer la r√©ponse
        userAnswers.push({
            question: question.question,
            userAnswer: answerIndex >= 0 ? question.options[answerIndex] : 'Temps √©coul√©',
            correctAnswer: question.options[question.correct],
            isCorrect: isCorrect,
            timeLeft: timeLeft,
            score: questionScore
        });

        // Afficher le feedback
        showFeedback(isCorrect, question.explanation, timeLeft === 0);

        // Afficher le bouton suivant
        document.getElementById('nextButton').classList.remove('hidden');
    }

    // Afficher le feedback
    function showFeedback(isCorrect, explanation, timeOut) {
        const feedback = document.getElementById('feedback');
        const icon = document.getElementById('feedbackIcon');
        const title = document.getElementById('feedbackTitle');
        const text = document.getElementById('feedbackText');

        if (timeOut) {
            icon.textContent = '‚è∞';
            title.textContent = 'Temps √©coul√© !';
            title.className = 'text-xl font-bold mb-2 text-orange-400';
            text.textContent = explanation;
        } else if (isCorrect) {
            icon.textContent = '‚úÖ';
            title.textContent = 'Excellente r√©ponse !';
            title.className = 'text-xl font-bold mb-2 text-green-400';
            text.textContent = explanation;
        } else {
            icon.textContent = '‚ùå';
            title.textContent = 'Pas tout √† fait...';
            title.className = 'text-xl font-bold mb-2 text-red-400';
            text.textContent = explanation;
        }

        feedback.classList.remove('hidden');
    }

    // Question suivante
    function nextQuestion() {
        currentQuestionIndex++;
        loadQuestion();
    }

    // Terminer le quiz
    function endQuiz() {
        const endTime = new Date();
        const totalTime = Math.floor((endTime - startTime) / 1000);
        const minutes = Math.floor(totalTime / 60);
        const seconds = totalTime % 60;

        document.getElementById('quizInterface').classList.add('hidden');
        document.getElementById('quizResults').classList.remove('hidden');

        // Calculer le pourcentage
        const percentage = Math.round((correctAnswers / shuffledQuestions.length) * 100);

        // Afficher les r√©sultats
        document.getElementById('finalScore').textContent = score;
        document.getElementById('correctAnswers').textContent = `${correctAnswers}/${shuffledQuestions.length}`;
        document.getElementById('totalTime').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;

        // D√©terminer le niveau
        let level, levelDesc, icon;
        if (percentage >= 86) {
            level = 'üëë Ma√Ætre Cyber';
            levelDesc = 'Expertise exceptionnelle !';
            icon = 'üëë';
        } else if (percentage >= 71) {
            level = 'ü•á Expert';
            levelDesc = 'Tr√®s bonnes connaissances !';
            icon = 'ü•á';
        } else if (percentage >= 41) {
            level = 'ü•à Interm√©diaire';
            levelDesc = 'Bonnes bases, continuez !';
            icon = 'ü•à';
        } else {
            level = 'ü•â D√©butant';
            levelDesc = 'Bon d√©but, √† approfondir !';
            icon = 'ü•â';
        }

        document.getElementById('userLevel').textContent = level;
        document.getElementById('levelDescription').textContent = levelDesc;
        document.getElementById('resultIcon').textContent = icon;

        // G√©n√©rer des recommandations
        generateRecommendations(percentage);
    }

    // G√©n√©rer des recommandations personnalis√©es
    function generateRecommendations(percentage) {
        const recommendations = [];

        if (percentage < 50) {
            recommendations.push('üìö Commencez par les bases de la cybers√©curit√©');
            recommendations.push('üéì Suivez un cours en ligne sur la s√©curit√© informatique');
            recommendations.push('üìñ Lisez des articles sur les menaces actuelles');
        } else if (percentage < 75) {
            recommendations.push('üîç Approfondissez vos connaissances en analyse de malwares');
            recommendations.push('üõ°Ô∏è √âtudiez les techniques de d√©fense avanc√©es');
            recommendations.push('üìä Explorez les outils de threat intelligence');
        } else {
            recommendations.push('üéØ Pratiquez le pentesting √©thique');
            recommendations.push('üèÜ Obtenez des certifications professionnelles (CISSP, CEH)');
            recommendations.push('üë• Rejoignez des communaut√©s de s√©curit√©');
        }

        // Analyser les cat√©gories faibles
        const categoryStats = {};
        userAnswers.forEach(answer => {
            const category = shuffledQuestions.find(q => q.question === answer.question).category;
            if (!categoryStats[category]) {
                categoryStats[category] = { correct: 0, total: 0 };
            }
            categoryStats[category].total++;
            if (answer.isCorrect) categoryStats[category].correct++;
        });

        // Recommandations sp√©cifiques
        Object.entries(categoryStats).forEach(([category, stats]) => {
            const percentage = (stats.correct / stats.total) * 100;
            if (percentage < 50) {
                recommendations.push(`üéØ Renforcez vos connaissances en ${category}`);
            }
        });

        document.getElementById('recommendationsList').innerHTML = recommendations
            .slice(0, 4)
            .map(rec => `<div class="mb-2">‚Ä¢ ${rec}</div>`)
            .join('');
    }

    // Recommencer le quiz
    function restartQuiz() {
        document.getElementById('quizResults').classList.add('hidden');
        document.getElementById('quizHome').classList.remove('hidden');
    }

    // Partager les r√©sultats
    function shareResults() {
        const percentage = Math.round((correctAnswers / shuffledQuestions.length) * 100);
        const level = document.getElementById('userLevel').textContent;

        const shareText = `üß† J'ai obtenu ${percentage}% au Quiz Cybers√©curit√© TechSpace !\n` +
            `Niveau atteint: ${level}\n` +
            `Score: ${score} points\n\n` +
            `Testez vos connaissances cyber ! üöÄ`;

        if (navigator.share) {
            navigator.share({
                title: 'Quiz Cybers√©curit√© TechSpace',
                text: shareText,
                url: window.location.href
            });
        } else {
            // Fallback: copier dans le presse-papiers
            navigator.clipboard.writeText(shareText).then(() => {
                alert('R√©sultats copi√©s dans le presse-papiers !');
            });
        }
    }
</script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9642ab48049df0d3',t:'MTc1MzM1MjI2MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
